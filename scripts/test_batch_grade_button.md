# 批量登分按钮测试清单

## 测试场景

### 1. 页面初始加载
- [ ] 批量登分按钮应该是禁用状态
- [ ] 按钮文本显示："批量登分"
- [ ] Tooltip显示："请先选择作业文件夹（非文件）"

### 2. 选择课程但未选择文件夹
- [ ] 批量登分按钮保持禁用状态

### 3. 选择文件（非文件夹）
- [ ] 批量登分按钮应该是禁用状态
- [ ] 按钮文本重置为："批量登分"
- [ ] Tooltip显示："请先选择作业文件夹（非文件）"

### 4. 选择有效的作业文件夹
- [ ] 批量登分按钮变为启用状态
- [ ] 按钮文本显示："批量登分 (作业名称)"
- [ ] Tooltip显示："对作业"xxx"进行批量登分"

### 5. 选择无效的文件夹（非作业文件夹）
- [ ] 批量登分按钮应该是禁用状态
- [ ] 按钮文本重置为："批量登分"
- [ ] Tooltip显示："该文件夹不是有效的作业文件夹"

### 6. 从作业文件夹切换到文件
- [ ] 批量登分按钮应该变为禁用状态
- [ ] 按钮文本重置为："批量登分"
- [ ] 之前显示的作业名称应该被清除

### 7. 点击批量登分按钮
- [ ] 显示确认对话框
- [ ] 对话框中显示正确的作业名称
- [ ] 确认后按钮显示"处理中..."
- [ ] 处理完成后显示结果摘要

## 控制台检查

打开浏览器开发者工具，检查控制台输出：

### 选择文件夹时应该看到：
```
更新批量登分按钮状态: <folder_path> <folder_id>
作业信息已加载: {homework object}
```

### 选择文件时应该看到：
```
文件节点被选中: <file_name>
```

## 常见问题

### 按钮一直显示启用状态
- 检查是否有多个 `select_node.jstree` 事件绑定
- 检查控制台是否有JavaScript错误

### 按钮文本不更新
- 检查 `updateBatchGradeButton()` 函数是否被正确调用
- 检查API `/grading/api/homework-info/` 是否返回正确数据

### 点击按钮无响应
- 检查按钮ID是否为 `batch-grade-btn`
- 检查事件绑定是否使用了正确的ID
