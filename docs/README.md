# é¡¹ç›®æ–‡æ¡£

æœ¬é¡¹ç›®å·²æ”¹ä¸ºå‰åç«¯åˆ†ç¦»ï¼šåç«¯ä»…æä¾› APIï¼ˆDjangoï¼‰ï¼Œå‰ç«¯ä½¿ç”¨ React + Viteã€‚

## æœ¬åœ°å¼€å‘

### åç«¯ï¼ˆDjangoï¼‰
```bash
uv run python manage.py runserver
```
é»˜è®¤åœ°å€ï¼š`http://127.0.0.1:8000/`ï¼ˆæ ¹è·¯å¾„ä¸ºå¥åº·æ£€æŸ¥ï¼‰ã€‚

### å‰ç«¯ï¼ˆReactï¼‰
```bash
cd frontend
npm install
npm run dev
```
é»˜è®¤åœ°å€ï¼š`http://127.0.0.1:5173/`ã€‚

### ç¯å¢ƒå˜é‡
å¤åˆ¶ `env.example` ä¸º `.env`ï¼Œè‡³å°‘é…ç½®ï¼š
- `SECRET_KEY`
- `ARK_API_KEY`
- `DEBUG`

å‰ç«¯ API åŸºåœ°å€åœ¨ `frontend/.env` ä¸­ï¼š
```
VITE_API_BASE_URL=http://127.0.0.1:8000
```

## ä½œä¸šç®¡ç†è¯´æ˜ï¼ˆæ•™å¸ˆï¼‰

### åŠŸèƒ½å®šä½
â€œä½œä¸šç®¡ç†â€ç”¨äºé…ç½®å­¦ç”Ÿæäº¤æ–¹å¼ä¸ä½œä¸šç›®å½•ç»“æ„ï¼Œæ›¿ä»£åŸâ€œä»“åº“ç®¡ç†â€æ¦‚å¿µã€‚

### æ–°å»ºä½œä¸š
1) é€‰æ‹©è¯¾ç¨‹ã€ç­çº§  
2) å¡«å†™ä½œä¸šåç§°/æ¬¡æ•°ï¼ˆå¦‚â€œç¬¬ä¸€æ¬¡ä½œä¸šâ€ï¼‰  
3) é€‰æ‹©æäº¤æ–¹å¼ï¼š
   - Git ä»“åº“ï¼šå¡«å†™ä»“åº“ URL ä¸åˆ†æ”¯
   - æ–‡ä»¶ä¸Šä¼ ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ `<è¯¾ç¨‹>/<ç­çº§>/` ç›®å½•ç»“æ„

### è¿œç¨‹è¯»å–
Git ç±»å‹ä½œä¸šç›´æ¥è¯»å–è¿œç¨‹ä»“åº“å†…å®¹ï¼Œæ— éœ€æœ¬åœ°åŒæ­¥æˆ–å…‹éš†ã€‚

### ç¼–è¾‘ä¸åˆ é™¤
ç¼–è¾‘ä½œä¸šé…ç½®ä¸ä¼šåˆ é™¤å·²æäº¤çš„å­¦ç”Ÿä½œä¸šï¼›åˆ é™¤æ—¶ä¼šæç¤ºå½±å“è¯´æ˜ã€‚

## å­¦ç”Ÿæäº¤è¯´æ˜

### æäº¤æµç¨‹
1) é€‰æ‹©ä½œä¸š  
2) é€‰æ‹©ä½œä¸šæ¬¡æ•°ç›®å½•ï¼ˆå¯ç‚¹å‡»â€œåˆ›å»ºæ–°ä½œä¸šç›®å½•â€è‡ªåŠ¨ç”Ÿæˆä¸‹ä¸€æ¬¡ä½œä¸šï¼‰  
3) ä¸Šä¼ æ–‡ä»¶  

### ç›®å½•ä¸å‘½å
- ç›®å½•ç»“æ„ï¼š`<è¯¾ç¨‹>/<ç­çº§>/<ä½œä¸šæ¬¡æ•°>/`  
- æ–‡ä»¶åä¼šè‡ªåŠ¨åŒ…å«å­¦ç”Ÿå§“å  
- æ”¯æŒæ ¼å¼ï¼šdocx/pdf/zip/txt ç­‰å¸¸è§æ ¼å¼  

## å¸¸è§é—®é¢˜

### ç™»å½• 403
è¯·ç¡®è®¤å‰ç«¯è®¿é—®åœ°å€ä¸åç«¯ API åŸºåœ°å€ä¸€è‡´ï¼ˆæ¨è `127.0.0.1`ï¼‰ã€‚

### AI è¯„åˆ†ä¸å¯ç”¨
æœªå®‰è£… `volcenginesdkarkruntime` æ—¶ä¼šæç¤ºè­¦å‘Šï¼ŒAI è¯„åˆ†åŠŸèƒ½ä¼šè¢«ç¦ç”¨ã€‚

## ????

### Huali Edu é¡¹ç›®


## ç®€ä»‹
æœ¬é¡¹ç›®ä¸ºåç«‹æ•™è‚²æˆç»©ç®¡ç†ä¸æ‰¹é‡è¯„åˆ†ç³»ç»Ÿï¼Œåç«¯åŸºäº Djangoï¼Œå‰ç«¯ä½¿ç”¨ Reactã€‚
åç«¯ä»…æä¾› APIï¼Œæ¨¡æ¿é¡µé¢å·²ç§»é™¤ã€‚

## ç›®å½•ç»“æ„
- grading/         ä¸»åº”ç”¨ï¼ˆAPIã€ä¸šåŠ¡é€»è¾‘ï¼‰
- hualiEdu/        Django é¡¹ç›®é…ç½®
- frontend/        React å‰ç«¯ï¼ˆViteï¼‰
- tests/           è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹
- static/          é™æ€èµ„æºï¼ˆJS/CSS/å›¾ç‰‡ï¼‰
- staticfiles/     Django æ”¶é›†çš„é™æ€æ–‡ä»¶
- media/           è¿è¡Œæ—¶ä¸Šä¼ /ç”Ÿæˆæ–‡ä»¶
- scripts/         è‡ªåŠ¨åŒ–è„šæœ¬
- docs/            é¡¹ç›®æ–‡æ¡£

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå˜é‡é…ç½®
```bash
cp env.example .env
# PowerShell
Copy-Item env.example .env
```

ä¸»è¦é…ç½®é¡¹ï¼š
- `SECRET_KEY`: Django å¯†é’¥
- `ARK_API_KEY`: ç«å±±å¼•æ“ AI API å¯†é’¥
- `DEBUG`: è°ƒè¯•æ¨¡å¼ (True/False)

### 2. å®‰è£…ä¾èµ–
```bash
uv sync
```

### 3. åˆå§‹åŒ–æ•°æ®åº“
```bash
uv run python manage.py migrate
```

### 4. åˆ›å»ºç®¡ç†å‘˜è´¦å·
```bash
uv run python manage.py createsuperuser
```

### 5. å¯åŠ¨åç«¯
```bash
uv run python manage.py runserver
```
åç«¯é»˜è®¤åœ°å€ï¼š`http://localhost:8000/`ï¼ˆæ ¹è·¯å¾„ä¸ºå¥åº·æ£€æŸ¥ï¼‰

### 6. å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm install
npm run dev
```
å‰ç«¯é»˜è®¤åœ°å€ï¼š`http://localhost:5173/`

### Makefileï¼ˆå¯é€‰ï¼‰
```bash
make runserver
```
Windows æ—  make æ—¶å¯ä½¿ç”¨ `scripts/dev.ps1`ã€‚

## æ–‡æ¡£
- æ–‡æ¡£ç´¢å¼•ï¼š`docs/README.md`
- ç¯å¢ƒä¸å˜é‡è¯´æ˜ï¼š`docs/environment.md`
- å‰ç«¯å¼€å‘è¯´æ˜ï¼š`docs/frontend.md`
- å¼€å‘è§„èŒƒï¼š`docs/DEVELOPMENT.md`

## æµ‹è¯•
```bash
uv run python -m unittest discover tests
```

### æ›´æ–°æ—¥å¿—


æœ¬æ–‡æ¡£è®°å½•ä½œä¸šè¯„åˆ†ç³»ç»Ÿçš„æ‰€æœ‰é‡è¦æ›´æ”¹ã€‚

æ ¼å¼åŸºäº [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ï¼Œ
ç‰ˆæœ¬å·éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ã€‚

## [æœªå‘å¸ƒ]

### è®¡åˆ’ä¸­
- ç§»åŠ¨ç«¯é€‚é…
- æ›´å¤šAIæ¨¡å‹æ”¯æŒ
- å®æ—¶åä½œè¯„åˆ†
- è¯„åˆ†æ•°æ®åˆ†æå’Œå¯è§†åŒ–

## [1.0.0] - 2024-11-30

### æ–°å¢

#### è¯¾ç¨‹å’Œç­çº§ç®¡ç†
- è¯¾ç¨‹åˆ›å»ºåŠŸèƒ½ï¼Œæ”¯æŒå››ç§è¯¾ç¨‹ç±»å‹ï¼ˆç†è®ºè¯¾/å®éªŒè¯¾/å®è·µè¯¾/æ··åˆè¯¾ï¼‰
- ç­çº§ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒå¤šç­çº§
- è¯¾ç¨‹ç±»å‹è‡ªåŠ¨è¯†åˆ«å’Œæ‰‹åŠ¨é…ç½®

#### ä»“åº“ç®¡ç†
- Gitä»“åº“æ–¹å¼æ”¯æŒ
  - è¿œç¨‹ä»“åº“é…ç½®
  - åˆ†æ”¯ç®¡ç†
  - SSH/HTTPSè®¤è¯
  - è¿æ¥éªŒè¯
- æ–‡ä»¶ç³»ç»Ÿæ–¹å¼æ”¯æŒ
  - è‡ªåŠ¨ç©ºé—´åˆ†é…
  - ç›®å½•åè‡ªåŠ¨ç”Ÿæˆå’Œé‡åå¤„ç†
  - ç›®å½•ç»“æ„éªŒè¯
- åŒæ¨¡å¼åŒæ—¶æ”¯æŒ

#### å­¦ç”Ÿä½œä¸šä¸Šä¼ 
- æ–‡ä»¶ç³»ç»Ÿæ–¹å¼æ”¯æŒå­¦ç”Ÿç›´æ¥ä¸Šä¼ 
- æ–‡ä»¶æ ¼å¼éªŒè¯ï¼ˆWordã€Excelã€PDFã€æ–‡æœ¬ï¼‰
- æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆ50MBï¼‰
- ç‰ˆæœ¬ç®¡ç†ï¼ˆè¦†ç›–ä¸Šä¼ ä¿ç•™å†å²ï¼‰
- ä¸Šä¼ è¿›åº¦æ˜¾ç¤º

#### æ™ºèƒ½è¯„åˆ†ç³»ç»Ÿ
- ä¸‰ç§è¯„åˆ†æ–¹å¼
  - å­—æ¯ç­‰çº§ï¼ˆA/B/C/D/Eï¼‰
  - æ–‡å­—ç­‰çº§ï¼ˆä¼˜ç§€/è‰¯å¥½/ä¸­ç­‰/åŠæ ¼/ä¸åŠæ ¼ï¼‰
  - ç™¾åˆ†åˆ¶ï¼ˆ0-100åˆ†ï¼‰
- è¯„åˆ†æ–¹å¼é”å®šæœºåˆ¶
- å®éªŒæŠ¥å‘Šç‰¹æ®Šå¤„ç†
  - è‡ªåŠ¨å®šä½"æ•™å¸ˆï¼ˆç­¾å­—ï¼‰"å•å…ƒæ ¼
  - å¼ºåˆ¶è¯„ä»·éªŒè¯
  - æ ¼å¼é”™è¯¯è‡ªåŠ¨é™çº§
- æ™®é€šä½œä¸šè¯„åˆ†
  - æ–‡æ¡£æœ«å°¾æ·»åŠ è¯„åˆ†
- è¯„åˆ†æ’¤é”€åŠŸèƒ½

#### AIè¾…åŠ©è¯„åˆ†
- åŸºäºç«å±±å¼•æ“Ark SDK
- è‡ªåŠ¨ç”Ÿæˆè¯„åˆ†å’Œè¯„ä»·
- å®éªŒæŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆè¯„ä»·
- é€Ÿç‡é™åˆ¶ä¿æŠ¤ï¼ˆæ¯ç§’2ä¸ªè¯·æ±‚ï¼‰
- æ‰¹é‡AIè¯„åˆ†æ”¯æŒ

#### è¯„ä»·åŠŸèƒ½
- è¯„ä»·ç¼“å­˜
  - æµè§ˆå™¨æœ¬åœ°å­˜å‚¨
  - æ¯2ç§’è‡ªåŠ¨ä¿å­˜
  - æ„å¤–å…³é—­æ¢å¤
  - 7å¤©è‡ªåŠ¨æ¸…ç†
- è¯„ä»·æ¨¡æ¿
  - ä¸ªäººå¸¸ç”¨è¯„ä»·ï¼ˆTop 5ï¼‰
  - ç³»ç»Ÿæ¨èè¯„ä»·
  - åŸºäºä½¿ç”¨é¢‘ç‡æ’åº
  - è‡ªåŠ¨ç»Ÿè®¡å’Œæ›´æ–°
  - å¿«é€Ÿå¡«å……åŠŸèƒ½

#### æ‰¹é‡æ“ä½œ
- æ‰¹é‡æ‰‹åŠ¨è¯„åˆ†
  - ç»Ÿä¸€è¯„åˆ†ç­‰çº§æˆ–åˆ†æ•°
  - å®æ—¶è¿›åº¦æ˜¾ç¤º
  - é”™è¯¯ä¸ä¸­æ–­æµç¨‹
  - æˆåŠŸå¤±è´¥ç»Ÿè®¡
- æ‰¹é‡AIè¯„åˆ†
  - è‡ªåŠ¨é€Ÿç‡é™åˆ¶
  - å®æ—¶è¿›åº¦æ˜¾ç¤º
  - å¤±è´¥è‡ªåŠ¨è·³è¿‡
  - è¯¦ç»†ç»“æœæ‘˜è¦

#### æ–‡ä»¶æµè§ˆå’Œå¯¼èˆª
- æ ‘å½¢ç›®å½•ç»“æ„
- æ–‡ä»¶å†…å®¹é¢„è§ˆï¼ˆWordã€Excelã€æ–‡æœ¬ï¼‰
- æ–‡ä»¶é—´å¿«é€Ÿåˆ‡æ¢
- å½“å‰ä½ç½®æ˜¾ç¤º
- ä½œä¸šç±»å‹æ ‡ç­¾æ˜¾ç¤º

#### æ ¼å¼éªŒè¯å’Œé”å®š
- å®éªŒæŠ¥å‘Šæ ¼å¼è‡ªåŠ¨éªŒè¯
- æ ¼å¼é”™è¯¯è‡ªåŠ¨å¤„ç†
  - è¯„åˆ†æ”¹ä¸ºD
  - æ·»åŠ é”å®šæ ‡è®°
  - æŒ‰æ™®é€šä½œä¸šæ–¹å¼å†™å…¥
- é”å®šæ–‡ä»¶ç¦æ­¢ä¿®æ”¹
- çº¢è‰²è­¦å‘Šæç¤º

#### å¤šç§Ÿæˆ·æ¶æ„
- ç§Ÿæˆ·æ•°æ®å®Œå…¨éš”ç¦»
- ç§Ÿæˆ·çº§é…ç½®ç®¡ç†
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶
- è‡ªåŠ¨ç§Ÿæˆ·è¯†åˆ«

#### å­¦æœŸç®¡ç†
- è‡ªåŠ¨å­¦æœŸæ£€æµ‹
- åŸºäºæ¨¡æ¿è‡ªåŠ¨åˆ›å»º
- å­¦æœŸçŠ¶æ€ç®¡ç†
- æ—¶é—´çº¿å¯è§†åŒ–

#### æ€§èƒ½ä¼˜åŒ–
- ç›®å½•æ–‡ä»¶æ•°é‡ç¼“å­˜
- è¯„ä»·æ¨¡æ¿æŸ¥è¯¢ç¼“å­˜ï¼ˆRedisï¼‰
- è¯¾ç¨‹å’Œç­çº§åˆ—è¡¨ç¼“å­˜
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
  - æ·»åŠ ç´¢å¼•
  - select_relatedå’Œprefetch_related
- æ‡’åŠ è½½ç›®å½•æ ‘

#### ç®¡ç†åŠŸèƒ½
- Django Adminå¢å¼ºï¼ˆdjango-jazzminï¼‰
- è‡ªå®šä¹‰ç®¡ç†å‘½ä»¤
  - scan_courses - æ‰«æè¯¾ç¨‹ç›®å½•
  - import_homeworks - å¯¼å…¥ä½œä¸šæ•°æ®
  - semester_management - å­¦æœŸç®¡ç†
  - create_templates - åˆ›å»ºå­¦æœŸæ¨¡æ¿
  - update_course_types - æ›´æ–°è¯¾ç¨‹ç±»å‹
  - clear_cache - æ¸…é™¤ç¼“å­˜

### æŠ€æœ¯å®ç°

#### åç«¯
- Django 4.2.20
- Python 3.13
- PostgreSQL/SQLite
- Redisç¼“å­˜
- GitPython 3.1.45
- python-docx 1.2.0
- openpyxl 3.1.5
- pandas 2.3.3
- volcengine 1.0.206

#### å‰ç«¯
- Bootstrap 5
- jQuery
- jsTreeï¼ˆç›®å½•æ ‘ï¼‰
- åŸç”ŸJavaScriptï¼ˆè¯„ä»·ç¼“å­˜ï¼‰

#### å¼€å‘å·¥å…·
- blackï¼ˆä»£ç æ ¼å¼åŒ–ï¼‰
- isortï¼ˆå¯¼å…¥æ’åºï¼‰
- flake8ï¼ˆä»£ç æ£€æŸ¥ï¼‰
- pre-commitï¼ˆæäº¤å‰æ£€æŸ¥ï¼‰

#### æµ‹è¯•
- Django TestCase
- å•å…ƒæµ‹è¯•
- é›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯æµ‹è¯•
- å±æ€§æµ‹è¯•ï¼ˆProperty-Based Testingï¼‰

### æ–‡æ¡£

#### æ ¸å¿ƒæ–‡æ¡£
- éœ€æ±‚æ–‡æ¡£ï¼ˆEARSæ ¼å¼ï¼Œ17ä¸ªä¸»éœ€æ±‚ï¼‰
- è®¾è®¡æ–‡æ¡£ï¼ˆå®Œæ•´ç³»ç»Ÿæ¶æ„ï¼‰
- å®ç°è®¡åˆ’ï¼ˆä»»åŠ¡æ¸…å•ï¼‰

#### ç”¨æˆ·æ–‡æ¡£
- ç”¨æˆ·æ‰‹å†Œï¼ˆå®Œæ•´ä½¿ç”¨æŒ‡å—ï¼‰
- å¿«é€Ÿå‚è€ƒï¼ˆæ ¸å¿ƒæ¦‚å¿µï¼‰
- æ‰¹é‡ç™»åˆ†æŒ‡å—

#### å¼€å‘æ–‡æ¡£
- å¼€å‘æŒ‡å—ï¼ˆç¯å¢ƒé…ç½®ï¼‰
- APIæ–‡æ¡£ï¼ˆå®Œæ•´æ¥å£è¯´æ˜ï¼‰
- éƒ¨ç½²æŒ‡å—ï¼ˆå¼€å‘/ç”Ÿäº§/Dockerï¼‰
- é¡¹ç›®ç»“æ„ï¼ˆä»£ç ç»„ç»‡ï¼‰
- å›¢é˜Ÿåä½œæŒ‡å—

#### æŠ€æœ¯æ–‡æ¡£
- ç¼“å­˜ä¼˜åŒ–å®ç°
- æ•°æ®åº“ä¼˜åŒ–
- è¯„ä»·ç¼“å­˜å®ç°
- å·²çŸ¥é—®é¢˜å’Œä¿®å¤

### æµ‹è¯•è¦†ç›–

- æ•°æ®æ¨¡å‹æµ‹è¯•
- æœåŠ¡å±‚æµ‹è¯•
- è§†å›¾å±‚æµ‹è¯•
- APIæ¥å£æµ‹è¯•
- é›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯æµ‹è¯•
- æ€§èƒ½æµ‹è¯•
- ç¼“å­˜æµ‹è¯•

### å·²çŸ¥é™åˆ¶

- å•ä¸ªæ–‡ä»¶æœ€å¤§50MB
- æ‰¹é‡æ“ä½œæœ€å¤š500ä¸ªæ–‡ä»¶
- AIè¯„åˆ†é€Ÿç‡é™åˆ¶ï¼ˆæ¯ç§’2ä¸ªè¯·æ±‚ï¼‰
- ä»…æ”¯æŒç‰¹å®šæ–‡ä»¶æ ¼å¼

## [0.9.0] - 2024-11-15

### æ–°å¢
- åŸºç¡€è¯„åˆ†åŠŸèƒ½
- æ–‡ä»¶æµè§ˆåŠŸèƒ½
- ç®€å•çš„è¯¾ç¨‹ç®¡ç†

### ä¿®å¤
- æ–‡ä»¶è·¯å¾„å®‰å…¨éªŒè¯
- å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»

## [0.8.0] - 2024-11-01

### æ–°å¢
- é¡¹ç›®åˆå§‹åŒ–
- åŸºç¡€æ¶æ„æ­å»º
- å¤šç§Ÿæˆ·æ”¯æŒ

---

## ç‰ˆæœ¬è¯´æ˜

### ç‰ˆæœ¬å·æ ¼å¼
- ä¸»ç‰ˆæœ¬å·ï¼šé‡å¤§æ¶æ„å˜æ›´æˆ–ä¸å…¼å®¹çš„APIä¿®æ”¹
- æ¬¡ç‰ˆæœ¬å·ï¼šæ–°åŠŸèƒ½æ·»åŠ ï¼Œå‘åå…¼å®¹
- ä¿®è®¢å·ï¼šbugä¿®å¤å’Œå°æ”¹è¿›

### æ›´æ–°ç±»å‹
- **æ–°å¢**ï¼šæ–°åŠŸèƒ½
- **ä¿®æ”¹**ï¼šç°æœ‰åŠŸèƒ½çš„å˜æ›´
- **å¼ƒç”¨**ï¼šå³å°†ç§»é™¤çš„åŠŸèƒ½
- **ç§»é™¤**ï¼šå·²ç§»é™¤çš„åŠŸèƒ½
- **ä¿®å¤**ï¼šbugä¿®å¤
- **å®‰å…¨**ï¼šå®‰å…¨ç›¸å…³çš„ä¿®å¤

## è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’ŒåŠŸèƒ½å»ºè®®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](docs/TEAM_COLLABORATION.md)ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

### å¿«é€Ÿå¼€å§‹ - ä½¿ç”¨ uv


> æœ¬é¡¹ç›®ç°åœ¨ä½¿ç”¨ **uv** è¿›è¡Œ Python åŒ…ç®¡ç†ï¼Œæä¾›æ›´å¿«ã€æ›´ç°ä»£çš„å¼€å‘ä½“éªŒã€‚

## å‰ç½®è¦æ±‚

- Python 3.13+ (uv ä¼šè‡ªåŠ¨ç®¡ç†)
- Git

## 5 åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1. å®‰è£… uv

```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# æˆ–ä½¿ç”¨ Homebrew (macOS)
brew install uv
```

### 2. å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url>
cd huali-edu
```

### 3. å®‰è£…ä¾èµ–

```bash
# æ–¹å¼ 1: ä½¿ç”¨ Makefile (æ¨è)
make install

# æ–¹å¼ 2: ç›´æ¥ä½¿ç”¨ uv
uv sync --all-extras
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®å¿…è¦çš„é…ç½®
# è‡³å°‘éœ€è¦è®¾ç½® SECRET_KEY
```

### 5. å¯åŠ¨ MySQL / Redis (Podman)

```bash
./scripts/podman_services.sh
```

è¯´æ˜ï¼š`make runserver` ä¼šè‡ªåŠ¨ç¡®ä¿ Podman æœåŠ¡å·²å¯åŠ¨ã€‚

### 6. åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿è¡Œæ•°æ®åº“è¿ç§»
make migrate

# åˆ›å»ºè¶…çº§ç”¨æˆ·
make createsuperuser
```

### 7. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
make runserver
```

è®¿é—® http://localhost:8000 æŸ¥çœ‹åº”ç”¨ï¼

## å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘æœåŠ¡å™¨
make runserver              # å¯åŠ¨æœåŠ¡å™¨ (ç«¯å£ 8000)
make runserver PORT=8080    # æŒ‡å®šç«¯å£

# æ•°æ®åº“
make migrate                # åº”ç”¨è¿ç§»
make makemigrations         # åˆ›å»ºè¿ç§»

# æµ‹è¯•
make test                   # è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test-app APP=grading   # æµ‹è¯•æŒ‡å®šåº”ç”¨

# ä»£ç è´¨é‡
make format                 # æ ¼å¼åŒ–ä»£ç 
make lint                   # ä»£ç æ£€æŸ¥

# Django å·¥å…·
make shell                  # Django shell
make createsuperuser        # åˆ›å»ºè¶…çº§ç”¨æˆ·

# æ¸…ç†
make clean                  # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
```

## æ·»åŠ æ–°ä¾èµ–

```bash
# æ·»åŠ ç”Ÿäº§ä¾èµ–
uv add <package-name>

# æ·»åŠ å¼€å‘ä¾èµ–
uv add --dev <package-name>

# ç¤ºä¾‹
uv add requests
uv add --dev pytest
```

## æ›´æ–°ä¾èµ–

```bash
# æ›´æ–°æ‰€æœ‰ä¾èµ–åˆ°æœ€æ–°ç‰ˆæœ¬
make sync

# æˆ–
uv sync --upgrade
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜: ModuleNotFoundError

**è§£å†³æ–¹æ¡ˆ**: ç¡®ä¿ä¾èµ–å·²å®‰è£…
```bash
make install
```

### é—®é¢˜: uv å‘½ä»¤æœªæ‰¾åˆ°

**è§£å†³æ–¹æ¡ˆ**: é‡æ–°å®‰è£… uv æˆ–é‡å¯ç»ˆç«¯
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
source ~/.bashrc  # æˆ– ~/.zshrc
```

### é—®é¢˜: Python ç‰ˆæœ¬ä¸å¯¹

**è§£å†³æ–¹æ¡ˆ**: uv ä¼šè‡ªåŠ¨ä½¿ç”¨æ­£ç¡®çš„ Python ç‰ˆæœ¬
```bash
uv run python --version  # åº”è¯¥æ˜¾ç¤º Python 3.13.x
```

## ä» conda è¿ç§»ï¼Ÿ

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨ condaï¼Œè¯·æŸ¥çœ‹ [UV è¿ç§»æŒ‡å—](docs/UV_MIGRATION_GUIDE.md)ã€‚

## ä¸‹ä¸€æ­¥

- é˜…è¯» [ç”¨æˆ·æ‰‹å†Œ](docs/USER_MANUAL.md)
- æŸ¥çœ‹ [API æ–‡æ¡£](docs/API.md)
- äº†è§£ [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)

## è·å–å¸®åŠ©

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make help

# æŸ¥çœ‹ uv å¸®åŠ©
uv --help
```

---

**å¼€å§‹ç¼–ç å§ï¼** ğŸš€

### Scripts ç›®å½•


> **é¡¹ç›®ç»´æŠ¤å’Œå·¥å…·è„šæœ¬**

## ğŸ“‹ è„šæœ¬åˆ—è¡¨

### æ¸…ç†è„šæœ¬

#### `cleanup_test_directories.sh`
æ¸…ç† Hypothesis æµ‹è¯•ç”Ÿæˆçš„éšæœºç›®å½•ï¼ˆBash ç‰ˆæœ¬ï¼‰ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
./scripts/cleanup_test_directories.sh

# æˆ–ä½¿ç”¨ Makefile
make clean-test-dirs
```

**åŠŸèƒ½ï¼š**
- åˆ é™¤æµ‹è¯•ç”Ÿæˆçš„éšæœºç›®å½•
- ä¿æŠ¤é¡¹ç›®æ ¸å¿ƒç›®å½•ï¼ˆç™½åå•ï¼‰
- æ˜¾ç¤ºå½©è‰²è¾“å‡ºå’Œç»Ÿè®¡ä¿¡æ¯
- æ¸…ç† `.hypothesis` ç›®å½•

#### `cleanup_test_directories.py`
æ¸…ç† Hypothesis æµ‹è¯•ç”Ÿæˆçš„éšæœºç›®å½•ï¼ˆPython ç‰ˆæœ¬ï¼‰ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# å®é™…åˆ é™¤
uv run python scripts/cleanup_test_directories.py

# é¢„è§ˆæ¨¡å¼ï¼ˆä¸å®é™…åˆ é™¤ï¼‰
uv run python scripts/cleanup_test_directories.py --dry-run
```

**ä¼˜åŠ¿ï¼š**
- è·¨å¹³å°å…¼å®¹
- æ”¯æŒé¢„è§ˆæ¨¡å¼
- æ›´å¯é çš„é”™è¯¯å¤„ç†
- è¯¦ç»†çš„æ—¥å¿—è¾“å‡º

### å¼€å‘è¾…åŠ©è„šæœ¬

**æ³¨æ„**ï¼šä»¥ä¸‹è„šæœ¬å·²åºŸå¼ƒï¼Œè¯·ä½¿ç”¨æ–°çš„æ–¹å¼ï¼š

| åºŸå¼ƒè„šæœ¬ | æ›¿ä»£æ–¹å¼ |
|---------|---------|
| `activate_env.sh` | `uv run` |
| `manage.sh` | `uv run python manage.py` æˆ– `make` å‘½ä»¤ |
| `runserver.sh` | `make runserver` |
| `test.sh` | `make test` |

### è¯Šæ–­è„šæœ¬

#### `diagnose_batch_grade.py`
è¯Šæ–­æ‰¹é‡è¯„åˆ†åŠŸèƒ½ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
uv run python scripts/diagnose_batch_grade.py
```

#### `manual_test_ssh_key.py`
æ‰‹åŠ¨æµ‹è¯• SSH å¯†é’¥é…ç½®ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
uv run python scripts/manual_test_ssh_key.py
```

#### `verify_database_structure.py`
éªŒè¯æ•°æ®åº“ç»“æ„ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
uv run python scripts/verify_database_structure.py
```

## ğŸ”§ ä½¿ç”¨å»ºè®®

### ä¼˜å…ˆä½¿ç”¨ Makefile

å¤§å¤šæ•°å¸¸ç”¨æ“ä½œéƒ½æœ‰ Makefile å‘½ä»¤ï¼š

```bash
make help              # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make test              # è¿è¡Œæµ‹è¯•
make runserver         # å¯åŠ¨æœåŠ¡å™¨
make clean             # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
make clean-test-dirs   # æ¸…ç†æµ‹è¯•ç›®å½•
make clean-all         # å®Œæ•´æ¸…ç†
```

### ç›´æ¥ä½¿ç”¨ uv run

å¯¹äºæ²¡æœ‰ Makefile å‘½ä»¤çš„è„šæœ¬ï¼š

```bash
uv run python scripts/<script_name>.py
```



## ğŸ“ æ·»åŠ æ–°è„šæœ¬

### è„šæœ¬è§„èŒƒ

1. **å‘½åè§„èŒƒ**
   - ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿
   - æè¿°æ€§åç§°
   - ç¤ºä¾‹ï¼š`cleanup_test_directories.py`

2. **æ–‡ä»¶å¤´éƒ¨**
   ```python
   #!/usr/bin/env python3
   """
   è„šæœ¬ç®€çŸ­æè¿°
   
   è¯¦ç»†è¯´æ˜...
   
   ä½¿ç”¨æ–¹æ³•ï¼š
       python scripts/script_name.py
   """
   ```

3. **å¯æ‰§è¡Œæƒé™**
   ```bash
   chmod +x scripts/script_name.sh
   ```

4. **æ–‡æ¡£**
   - åœ¨æœ¬ README ä¸­æ·»åŠ è¯´æ˜
   - åœ¨è„šæœ¬ä¸­æ·»åŠ è¯¦ç»†æ³¨é‡Š
   - æä¾›ä½¿ç”¨ç¤ºä¾‹

### Python è„šæœ¬æ¨¡æ¿

```python
#!/usr/bin/env python3
"""
è„šæœ¬åç§°

åŠŸèƒ½æè¿°...

ä½¿ç”¨æ–¹æ³•ï¼š
    python scripts/script_name.py [options]
"""

import sys
from pathlib import Path


def main():
    """ä¸»å‡½æ•°"""
    print("è„šæœ¬æ‰§è¡Œä¸­...")
    # å®ç°é€»è¾‘
    

if __name__ == "__main__":
    main()
```

### Bash è„šæœ¬æ¨¡æ¿

```bash
#!/bin/bash
# è„šæœ¬åç§°
# 
# åŠŸèƒ½æè¿°...
# 
# ä½¿ç”¨æ–¹æ³•ï¼š
#   ./scripts/script_name.sh

set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${GREEN}è„šæœ¬å¼€å§‹æ‰§è¡Œ...${NC}"

# å®ç°é€»è¾‘

echo -e "${GREEN}å®Œæˆï¼${NC}"
```

## ğŸ› æ•…éšœæ’æŸ¥

### æƒé™é”™è¯¯

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/script_name.sh
```

### Python æ¨¡å—æœªæ‰¾åˆ°

```bash
# ç¡®ä¿ä½¿ç”¨ uv run
uv run python scripts/script_name.py

# æˆ–å®‰è£…ä¾èµ–
make install
```

### è·¯å¾„é”™è¯¯

è„šæœ¬åº”è¯¥ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
# æ­£ç¡®
./scripts/script_name.sh

# é”™è¯¯
cd scripts && ./script_name.sh
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¼€å‘æŒ‡å—](../docs/DEVELOPMENT.md) - å®Œæ•´çš„å¼€å‘ç¯å¢ƒå’Œå·¥ä½œæµç¨‹
- [æ–‡æ¡£å¯¼èˆª](../docs/README.md) - æ‰€æœ‰é¡¹ç›®æ–‡æ¡£ç´¢å¼•

### é›†æˆæµ‹è¯•


> **è·¨åº”ç”¨çš„é›†æˆæµ‹è¯•**

## æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ README.md              # æœ¬æ–‡ä»¶
â”œâ”€â”€ __init__.py            # æµ‹è¯•åŒ…åˆå§‹åŒ–
â””â”€â”€ test_*.py              # é›†æˆæµ‹è¯•æ–‡ä»¶
```

**æ³¨æ„**ï¼š
- åº”ç”¨çº§æµ‹è¯•ä½äº `<app>/tests/`
- æ‰‹åŠ¨æµ‹è¯•è„šæœ¬ä½äº `scripts/`

## è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆåŒ…æ‹¬é›†æˆæµ‹è¯•ï¼‰
make test

# åªè¿è¡Œé›†æˆæµ‹è¯•
uv run python manage.py test tests

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
uv run python manage.py test tests.test_git_handler
```

## æµ‹è¯•ç±»å‹

### é›†æˆæµ‹è¯•ï¼ˆtests/ï¼‰
æµ‹è¯•å¤šä¸ªåº”ç”¨æˆ–ç»„ä»¶çš„äº¤äº’ï¼Œå¦‚ï¼š
- Git å¤„ç†å·¥å…·
- è·¨åº”ç”¨å·¥ä½œæµ
- ç«¯åˆ°ç«¯åœºæ™¯

### å•å…ƒæµ‹è¯•ï¼ˆgrading/tests/ï¼‰
æµ‹è¯•å•ä¸ªåº”ç”¨çš„åŠŸèƒ½ï¼Œå¦‚ï¼š
- æ¨¡å‹æµ‹è¯•
- è§†å›¾æµ‹è¯•
- æœåŠ¡å±‚æµ‹è¯•

## æµ‹è¯•è§„èŒƒ

è¯¦è§ [å¼€å‘æŒ‡å— - æµ‹è¯•éƒ¨åˆ†](../docs/DEVELOPMENT.md#æµ‹è¯•æŒ‡å—)
