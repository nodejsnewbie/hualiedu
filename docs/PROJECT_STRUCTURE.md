# é¡¹ç›®ç»“æ„è¯´æ˜

## ç›®å½•ç»“æ„

```
huali-edu/
â”œâ”€â”€ docs/                       # ğŸ“š é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md              # æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ TEAM_COLLABORATION.md  # å›¢é˜Ÿåä½œæŒ‡å—
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md   # æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ features/              # åŠŸèƒ½æ–‡æ¡£
â”‚   â”œâ”€â”€ api/                   # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ deployment/            # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ testing/               # æµ‹è¯•æ–‡æ¡£
â”‚
â”œâ”€â”€ grading/                   # ğŸ¯ æ ¸å¿ƒåº”ç”¨ - è¯„åˆ†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ management/            # Djangoç®¡ç†å‘½ä»¤
â”‚   â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ grade_registry_writer_service.py  # æ‰¹é‡ç™»åˆ†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ semester_manager.py               # å­¦æœŸç®¡ç†ä¸»æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ semester_auto_creator.py          # å­¦æœŸè‡ªåŠ¨åˆ›å»º
â”‚   â”‚   â”œâ”€â”€ semester_detector.py              # å½“å‰å­¦æœŸæ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ semester_config.py                # å­¦æœŸé…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ semester_naming.py                # å­¦æœŸå‘½åè§„åˆ™
â”‚   â”‚   â”œâ”€â”€ semester_status.py                # å­¦æœŸçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ semester_status_display.py        # å­¦æœŸçŠ¶æ€æ˜¾ç¤º
â”‚   â”‚   â””â”€â”€ semester_time.py                  # å­¦æœŸæ—¶é—´è®¡ç®—
â”‚   â”œâ”€â”€ static/                # é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ templates/             # æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ templatetags/          # æ¨¡æ¿æ ‡ç­¾
â”‚   â”œâ”€â”€ tests/                 # åº”ç”¨æµ‹è¯•
â”‚   â”œâ”€â”€ admin.py               # ç®¡ç†åå°
â”‚   â”œâ”€â”€ models.py              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ views.py               # è§†å›¾å‡½æ•°
â”‚   â”œâ”€â”€ urls.py                # URLè·¯ç”±
â”‚   â”œâ”€â”€ utils.py               # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ forms.py               # è¡¨å•å®šä¹‰
â”‚
â”œâ”€â”€ toolbox/                   # ğŸ”§ å·¥å…·ç®±åº”ç”¨
â”‚   â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ views.py
â”‚   â””â”€â”€ urls.py
â”‚
â”œâ”€â”€ hualiEdu/                  # âš™ï¸ é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ settings.py            # é¡¹ç›®è®¾ç½®
â”‚   â”œâ”€â”€ urls.py                # ä¸»URLé…ç½®
â”‚   â”œâ”€â”€ wsgi.py                # WSGIé…ç½®
â”‚   â””â”€â”€ asgi.py                # ASGIé…ç½®
â”‚
â”œâ”€â”€ templates/                 # ğŸ¨ å…¨å±€æ¨¡æ¿
â”‚   â”œâ”€â”€ admin/                 # ç®¡ç†åå°æ¨¡æ¿
â”‚   â”œâ”€â”€ base.html              # åŸºç¡€æ¨¡æ¿
â”‚   â””â”€â”€ *.html                 # å…¶ä»–å…¨å±€æ¨¡æ¿
â”‚
â”œâ”€â”€ static/                    # ğŸ“¦ é™æ€æ–‡ä»¶ï¼ˆå¼€å‘ï¼‰
â”‚   â”œâ”€â”€ admin/
â”‚   â””â”€â”€ grading/
â”‚
â”œâ”€â”€ staticfiles/               # ğŸ“¦ é™æ€æ–‡ä»¶ï¼ˆç”Ÿäº§ï¼‰
â”‚
â”œâ”€â”€ media/                     # ğŸ“ ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
â”‚   â”œâ”€â”€ assignments/
â”‚   â”œâ”€â”€ grades/
â”‚   â””â”€â”€ ssh_keys/
â”‚
â”œâ”€â”€ tests/                     # ğŸ§ª è‡ªåŠ¨åŒ–æµ‹è¯•
â”‚   â”œâ”€â”€ README.md              # æµ‹è¯•æ–‡æ¡£
â”‚   â””â”€â”€ test_git_handler.py    # Gitå·¥å…·æµ‹è¯•
â”‚
â”œâ”€â”€ scripts/                   # ğŸ”§ æ‰‹åŠ¨æµ‹è¯•å’Œå·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ README.md              # è„šæœ¬è¯´æ˜
â”‚   â””â”€â”€ manual_test_ssh_key.py # SSHå¯†é’¥æ‰‹åŠ¨æµ‹è¯•
â”‚
â”œâ”€â”€ logs/                      # ğŸ“ æ—¥å¿—æ–‡ä»¶
â”‚   â””â”€â”€ app.log
â”‚
â”œâ”€â”€ .env                       # ğŸ” ç¯å¢ƒå˜é‡ï¼ˆä¸æäº¤ï¼‰
â”œâ”€â”€ .env.example               # ğŸ” ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore                 # ğŸš« Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ manage.py                  # ğŸ® Djangoç®¡ç†è„šæœ¬
â”œâ”€â”€ requirements.txt           # ğŸ“‹ Pythonä¾èµ–
â”œâ”€â”€ Dockerfile                 # ğŸ³ Dockeré…ç½®
â”œâ”€â”€ docker-compose.yml         # ğŸ³ Docker Composeé…ç½®
â””â”€â”€ README.md                  # ğŸ“– é¡¹ç›®è¯´æ˜
```

## æ–‡ä»¶ç»„ç»‡åŸåˆ™

### 1. åº”ç”¨å†…æµ‹è¯•
- åº”ç”¨ç‰¹å®šçš„æµ‹è¯•æ”¾åœ¨åº”ç”¨çš„ `tests/` ç›®å½•
- ä¾‹å¦‚ï¼š`grading/tests/test_models.py`

### 2. é¡¹ç›®çº§æµ‹è¯•
- è·¨åº”ç”¨çš„é›†æˆæµ‹è¯•æ”¾åœ¨æ ¹ç›®å½•çš„ `tests/` ç›®å½•
- ä¾‹å¦‚ï¼š`tests/test_git_handler.py`
- åªåŒ…å«å¯è‡ªåŠ¨è¿è¡Œçš„æµ‹è¯•

### 3. æ‰‹åŠ¨æµ‹è¯•å’Œå·¥å…·è„šæœ¬
- æ‰‹åŠ¨æµ‹è¯•è„šæœ¬æ”¾åœ¨ `scripts/` ç›®å½•
- å‘½åè§„èŒƒï¼š`manual_test_*.py`
- ä¸åº”è¯¥åœ¨ CI/CD ä¸­è‡ªåŠ¨è¿è¡Œ

### 4. æ–‡æ¡£ç®¡ç†
- æ‰€æœ‰æ–‡æ¡£é›†ä¸­åœ¨ `docs/` ç›®å½•
- æŒ‰ç±»å‹åˆ†ç±»ï¼šåŠŸèƒ½ã€APIã€éƒ¨ç½²ã€æµ‹è¯•ç­‰

### 5. ä¸´æ—¶æ–‡ä»¶
- ä¸è¦æäº¤ä¸´æ—¶æ–‡ä»¶ã€å¤‡ä»½æ–‡ä»¶ã€è°ƒè¯•æ–‡ä»¶
- ä½¿ç”¨ `.gitignore` å¿½ç•¥è¿™äº›æ–‡ä»¶
- å‘½åè§„èŒƒï¼š`*_backup`, `*_temp`, `*_old`, `debug_*`, `test_*`

### 6. é™æ€æ–‡ä»¶
- å¼€å‘æ—¶ä½¿ç”¨ `static/`
- ç”Ÿäº§ç¯å¢ƒæ”¶é›†åˆ° `staticfiles/`
- åº”ç”¨ç‰¹å®šçš„é™æ€æ–‡ä»¶æ”¾åœ¨åº”ç”¨çš„ `static/` ç›®å½•

### 7. æœåŠ¡å±‚ç»„ç»‡
**æ‰¹é‡ç™»åˆ†æœåŠ¡**:
- `grade_registry_writer_service.py` - æˆç»©æ‰¹é‡å†™å…¥æœåŠ¡ï¼Œæ”¯æŒä½œä¸šè¯„åˆ†å’Œå·¥å…·ç®±ä¸¤ç§åœºæ™¯

**å­¦æœŸç®¡ç†æœåŠ¡**:
- `semester_manager.py` - å­¦æœŸç®¡ç†ä¸»æœåŠ¡ï¼Œåè°ƒå…¶ä»–å­¦æœŸç›¸å…³æœåŠ¡
- `semester_auto_creator.py` - æ ¹æ®æ¨¡æ¿è‡ªåŠ¨åˆ›å»ºå­¦æœŸ
- `semester_detector.py` - æ£€æµ‹å½“å‰å­¦æœŸ
- `semester_config.py` - å­¦æœŸé…ç½®ç®¡ç†
- `semester_naming.py` - å­¦æœŸå‘½åè§„åˆ™
- `semester_status.py` - å­¦æœŸçŠ¶æ€ç®¡ç†
- `semester_status_display.py` - å­¦æœŸçŠ¶æ€æ˜¾ç¤ºæ ¼å¼åŒ–
- `semester_time.py` - å­¦æœŸæ—¶é—´è®¡ç®—å·¥å…·

### 8. æ¨¡æ¿æ–‡ä»¶
- å…¨å±€æ¨¡æ¿æ”¾åœ¨ `templates/`
- åº”ç”¨ç‰¹å®šæ¨¡æ¿æ”¾åœ¨åº”ç”¨çš„ `templates/` ç›®å½•
- ä¸è¦ä¿ç•™è°ƒè¯•æˆ–æµ‹è¯•æ¨¡æ¿

## æ¸…ç†è§„åˆ™

### å®šæœŸæ¸…ç†
1. **å¤‡ä»½æ–‡ä»¶**ï¼š`*.backup`, `*.bak`, `*_backup`
2. **ä¸´æ—¶æ–‡ä»¶**ï¼š`*.tmp`, `*_temp`, `*_tmp`
3. **è°ƒè¯•æ–‡ä»¶**ï¼š`debug_*`, `*_debug`
4. **æµ‹è¯•æ–‡ä»¶**ï¼š`test_*` (åœ¨éæµ‹è¯•ç›®å½•ä¸­)
5. **æ—§æ–‡ä»¶**ï¼š`*_old`, `*_deprecated`

### æäº¤å‰æ£€æŸ¥
```bash
# æŸ¥æ‰¾å¯èƒ½éœ€è¦æ¸…ç†çš„æ–‡ä»¶
find . -name "*_backup*" -o -name "*_temp*" -o -name "*_old*" -o -name "debug_*"
```

## æœ€ä½³å®è·µ

1. **ä¿æŒç»“æ„æ¸…æ™°**ï¼šæ¯ä¸ªç›®å½•æœ‰æ˜ç¡®çš„ç”¨é€”
2. **åŠæ—¶æ¸…ç†**ï¼šä¸éœ€è¦çš„æ–‡ä»¶åŠæ—¶åˆ é™¤
3. **æ–‡æ¡£åŒæ­¥**ï¼šä»£ç å˜æ›´æ—¶æ›´æ–°ç›¸å…³æ–‡æ¡£
4. **æµ‹è¯•è¦†ç›–**ï¼šæ–°åŠŸèƒ½å¿…é¡»æœ‰å¯¹åº”æµ‹è¯•
5. **å‘½åè§„èŒƒ**ï¼šéµå¾ª Django å’Œ Python å‘½åçº¦å®š
