# 批量登分功能快速测试

## 修复内容
1. 修复了按钮ID不匹配问题（`batchGradeBtn` → `batch-grade-btn`）
2. 在 `templates/grading_simple.html` 中添加了初始禁用状态
3. 实现了作业文件夹关联逻辑

## 快速测试步骤

### 1. 打开浏览器开发者工具
按 F12 或右键 → 检查

### 2. 访问评分页面
http://127.0.0.1:8000/grading/grading/

### 3. 检查初始状态
- [ ] 批量登分按钮应该是禁用状态（灰色）
- [ ] 按钮文本显示："批量登分"
- [ ] 鼠标悬停显示tooltip："请先选择作业文件夹（非文件）"

### 4. 选择仓库
- [ ] 从下拉框选择一个仓库
- [ ] 课程下拉框应该变为可用

### 5. 选择课程
- [ ] 从下拉框选择一个课程
- [ ] 文件树应该加载出来
- [ ] 批量登分按钮仍然是禁用状态

### 6. 选择作业文件夹
- [ ] 点击一个作业文件夹（不是文件）
- [ ] 批量登分按钮应该变为启用状态
- [ ] 按钮文本应该显示："批量登分 (作业名称)"
- [ ] 控制台应该显示："作业信息已加载"

### 7. 选择文件
- [ ] 点击一个文件
- [ ] 批量登分按钮应该变回禁用状态
- [ ] 按钮文本应该重置为："批量登分"

### 8. 点击批量登分按钮
- [ ] 选择一个作业文件夹
- [ ] 点击批量登分按钮
- [ ] 应该弹出确认对话框
- [ ] 对话框中显示正确的作业名称

## 控制台检查

打开控制台（Console标签），应该看到：

```
=== 初始化批量登分按钮 ===
按钮元素数量: 1
初始disabled状态: true
设置后disabled状态: true
按钮文本: 批量登分
```

选择作业文件夹时应该看到：

```
=== 更新批量登分按钮状态 ===
文件夹路径: ...
当前课程: ...
作业信息已加载: {homework object}
```

## 常见问题排查

### 按钮一直是禁用状态
1. 检查是否选择了课程（`currentCourse` 变量）
2. 检查控制台是否有错误
3. 检查API `/grading/api/homework-info/` 是否返回数据

### 按钮ID不匹配
1. 确认使用的是 `templates/grading_simple.html`
2. 确认按钮ID是 `batch-grade-btn`（带连字符）
3. 清除浏览器缓存（Ctrl+Shift+R 或 Cmd+Shift+R）

### 浏览器缓存问题
1. 硬刷新：Ctrl+Shift+R (Windows) 或 Cmd+Shift+R (Mac)
2. 或者清除浏览器缓存
3. 或者使用无痕模式测试
